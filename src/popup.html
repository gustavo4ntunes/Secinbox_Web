<!doctype html>

<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AntiPhishing – Controle</title>
  <link rel="stylesheet" href="styles/tailwind.css" />
</head>

<body class="bg-slate-900 text-slate-100 font-sans p-4 flex flex-col space-y-3" style="width: 400px; height: 520px;">
  <h1 class="text-sm font-semibold flex items-center gap-2">
    <span class="inline-block w-2.5 h-2.5 rounded-full bg-lime-400 shadow-[0_0_10px] shadow-lime-400/40"></span>
    Verificação de Links
  </h1>

  <div class="bg-slate-800/70 border border-slate-700/60 rounded-xl p-4 shadow-md shadow-black/40">
    <div class="flex items-center justify-between">
      <div class="text-[13px] leading-snug">
        <strong class="text-slate-100">Global</strong>
        <div class="text-slate-400">Verificação em todos os sites</div>
      </div>

      <label class="relative inline-flex items-center cursor-pointer has-[:disabled]:cursor-not-allowed"
        title="Alternar global">
        <input id="switch-global" type="checkbox" class="sr-only peer disabled:cursor-not-allowed" />
        <div class="w-12 h-7 rounded-full transition-colors duration-200
                  bg-slate-600 peer-checked:bg-lime-400
                  peer-disabled:opacity-40 peer-disabled:cursor-not-allowed">
        </div>
        <div class="absolute left-1 top-1 w-5 h-5 rounded-full
                  bg-slate-700 transition-transform duration-200
                  peer-checked:translate-x-5 peer-checked:bg-lime-100 shadow-inner
                  peer-disabled:cursor-not-allowed">
        </div>
      </label>
    </div>
    <p id="status-global" class="mt-2 text-xs text-slate-400">Carregando estado global…</p>
  </div>

  <div class="bg-slate-800/70 border border-slate-700/60 rounded-xl p-4 shadow-md shadow-black/40">
    <div class="flex items-center justify-between">
      <div class="text-[13px] leading-snug">
        <strong class="text-slate-100">Esta página</strong>
        <div class="text-slate-400">Verificação aqui</div>
      </div>

      <label class="relative inline-flex items-center cursor-pointer has-[:disabled]:cursor-not-allowed"
        title="Alternar nesta página">
        <input id="switch-page" type="checkbox" class="sr-only peer disabled:cursor-not-allowed" />
        <div class="w-12 h-7 bg-slate-600 rounded-full
                  transition-colors duration-200
                  peer-checked:bg-lime-400
                  peer-disabled:opacity-40 peer-disabled:cursor-not-allowed">
        </div>
        <div class="absolute left-1 top-1 w-5 h-5 bg-slate-700 rounded-full
                  transition-transform duration-200
                  peer-checked:translate-x-5 peer-checked:bg-lime-100 shadow-inner
                  peer-disabled:cursor-not-allowed">
        </div>
      </label>
    </div>
    <p id="status" class="mt-2 text-xs text-slate-400">Carregando estado desta página…</p>
  </div>

  <div class="flex justify-end">
    <button id="btn-open-disabled"
      class="inline-flex items-center gap-2 bg-slate-700 hover:bg-slate-600 text-slate-100 text-sm px-3 py-2 rounded-md shadow-sm">
      <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M3 12h18M3 6h18M3 18h18" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
      Sites desativados
    </button>
  </div>

  <div id="disabled-modal" class="fixed inset-0 z-50 hidden items-center justify-center">
    <!-- overlay -->
    <div id="disabled-modal-overlay" class="absolute inset-0 bg-black/60"></div>

    <!-- painel -->
    <div class="relative bg-slate-800 rounded-xl shadow-xl w-[min(520px,92%)] max-h-[84vh] overflow-auto p-4 z-10">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-sm font-semibold text-slate-100">Sites desativados individualmente</h3>
        <button id="disabled-modal-close" class="text-slate-300 hover:text-white">Fechar ✕</button>
      </div>

      <div id="disabled-list" class="space-y-2 text-sm text-slate-200">
        <!-- preenchido dinamicamente -->
        <p class="text-slate-400">Carregando…</p>
      </div>

      <div class="mt-4 flex justify-end gap-2">
        <button id="disabled-modal-refresh" class="px-3 py-1 text-sm rounded bg-slate-700 hover:bg-slate-600">
          Atualizar
        </button>
        <button id="disabled-modal-clear"
          class="px-3 py-1 text-sm rounded bg-lime-600 hover:bg-lime-500 text-white font-medium">
          Reativar todos
        </button>

      </div>
    </div>
  </div>

  <p class="mt-auto text-xs text-slate-500 text-center">
    Quando o estado global estiver desligado, a verificação fica desabilitada em todos os sites e o switch da página é
    bloqueado.
  </p>

  <script type="module" src="./popup.js"></script>
</body>

</html>